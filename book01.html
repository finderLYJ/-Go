<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>详细信息</title>


    <link href="css/all.css" rel="stylesheet" type="text/css">
    <link href="js/editor/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="js/editor/css/froala_editor.min.css" rel="stylesheet" type="text/css">
</head>

<body style="background-color: #e6ecf5 " >
<div class="book_con01">
    <!-- <p class="book_p"><span class="book_titSpan"><input type="text" class="book_input01"/><label>类</label><input type="text" class="book_input02"/><label>号</label></span></p> -->
    <h1 class="book_h01">风运Go司机信息</h1>
    <form id="form_demo" >   <p class="book_p">
        <table class="book_table" border="1" cellpadding="10">
    <tr>
        <!-- <td>
        <label class="td_label">提案类型</label><i class="i_start"></i>
    </td> -->
        <!-- <td colspan="5"><input type="radio" class="input_radio" checked="checked" name="radio01"/><a>集体提案</a><input type="radio" class="input_radio" name="radio01"/><a>个人提案</a><input type="radio" class="input_radio" name="radio01"/><a>联名提案</a></td> -->

    </tr>
    <!-- <tr>
        <td>
        <label class="td_label">案由</label><i class="i_start"></i>
    </td>
        <td colspan="5"><input type="text" class="book_input03" name ="name" minlength="2"  required /></td>

    </tr> -->
    <tr><td><label class="td_label">姓名</label><i class="i_start"></i></td>
        <td ><input type="text" class="book_input03" name ="name" minlength="2"  required /></td>

        <td><label class="td_label">性别</label></td>
        <td>
            <input type="text" class="book_input03" name = "gener"/>
        </td>
        <td><label class="td_label">民族</label></td>
        <td>
            <input type="text" class="book_input03" name = "nation"/>
        </td>
    </tr>
    <tr><td><label class="td_label">身份证号</label></td>
        <td ><input type="text" class="book_input03" name = "ID_number"/></td>

        <td><label class="td_label">邮政编号</label></td>
        <td>
            <input type="text" class="book_input03" name="Post_code"/>
        </td>
        <td><label class="td_label">联系电话</label></td>
        <td>
            <input type="number" class="book_input03" name="phone"/>
        </td>
    </tr>
    <tr> <td><label class="td_label">家庭住址</label></td>
        <td colspan="2">
            <input type="text" class="book_input03" name="address"/>
        </td>
        <td><label class="td_label">E-Mail</label></td>
        <td colspan="2">
            <input type="email" class="book_input03" name = 'e-mail'/>
        </td>

    </tr>
    <!-- <tr> <td><label class="td_label">通讯地址</label></td>
        <td colspan="5">
            <input type="text" class="book_input03"/>
        </td>
    </tr> -->
    <tr><td><label class="td_label">身份证图片</label></td>
        <td colspan="5">
            <a href="#" id="imageLink">查看图片</a>
        </td>
    </tr>
    <!-- <tr><td colspan="6"><label class="td_label">个人陈述</label></td>

    </tr>
    <tr><td colspan="6">
        <textarea  class="textArae" id="editor" name="statement">21312312</textarea>
    </td>

    </tr> -->
    <!-- <tr ><td>
        <label class="td_label">更改身份证图片</label>
        </td>
        <td colspan="5">
            <p><label class="td_label">文件1</label><input type="file" value="选择文件"/></p>
            <p><label class="label_red">附件总大小不能超过200M，超过限制,将不能发送</label></p>
        </td>

    </tr>
    <tr><td><label class="td_label">相关情况</label></td>
        <td colspan="5"><input type="checkbox" class="input_radio" /><a>同意公开发表</a><input type="checkbox" class="input_radio" /><a>同意其它委员参阅</a></td>

    </tr>
    <tr><td colspan="2"><label class="td_label">希望办理的承办单位（供参考）</label></td>
        <td colspan="4"><input type="button" value="选择单位"/></td>

    </tr>
    <tr><td><label class="td_label">提案联系人</label></td>
        <td colspan="4"><input type="text" placeholder="输入姓名" class="book_input04"/><input type="text" placeholder="输入单位" class="book_input05"/><input type="text" placeholder="输入电话" class="book_input04"/></td>

        <td><input type="button" value="添加提案联系人"/></td>
    </tr>
    <tr><td><label class="td_label">提案联名人</label></td>
        <td colspan="4"><input type="text"  class="book_input03"/></td>

        <td><input type="button" value="添加提案联名人"/></td>
    </tr> -->

</table>
    </p>
    <p class="book_foot"><input type="submit" value="保存"/><input type="button" value="重置"/><input type="button" value="取消"/></p></form>
</div>
<script  src="js/jquery/jQuery-2.2.0.min.js"></script>
<script src="js/editor/js/froala_editor.min.js"></script>
<script src="js/editor/js/plugins/tables.min.js"></script>
<script src="js/editor/js/plugins/lists.min.js"></script>
<script src="js/editor/js/plugins/colors.min.js"></script>
<script src="js/editor/js/plugins/media_manager.min.js"></script>
<script src="js/editor/js/plugins/font_family.min.js"></script>
<script src="js/editor/js/plugins/font_size.min.js"></script>
<script src="js/editor/js/plugins/block_styles.min.js"></script>
<script src="js/editor/js/plugins/video.min.js"></script>
<script src="js/date/js/laydate.js"></script>
<!-- 获取从allFind.html传输过来的id -->
<script>
    // 获取URL参数的函数
    function getUrlParameter(name) {
        name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
        var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
        var results = regex.exec(location.search);
        return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    }
    var ID = getUrlParameter("id");
    // var id = ID.substr(-3);
    // id = parseInt(id);
    // console.log(id);
    // JavaScript代码

    fetch('json/allFind.json')
    .then(response => response.json())
    .then(data => {
        // 获取 JSON 数据中的数组部分
        var jsonData = data.data;
        
        // 找到与 ID 匹配的对象
        var selectedData = jsonData.find(function(item) {
        return item.id === ID;
        });

        if (selectedData) {
            console.log(selectedData);
            // alert('当前查看:\n编号:' + selectedData.id+'\n姓名:' + selectedData.name);
        // // 假设要填充姓名到名字输入框中
        // 司机姓名
        var nameInput = document.querySelector('.book_input03[name="name"]');
        nameInput.value = selectedData.name;
        // 司机性别
        var generInput = document.querySelector('.book_input03[name="gener"]');
        generInput.value = selectedData.gener;
        // 民族
        var nationInput = document.querySelector('.book_input03[name="nation"]');
        nationInput.value = selectedData.natino;
        // 身份证号
        var ID_numberInput = document.querySelector('.book_input03[name="ID_number"]');
        ID_numberInput.value = selectedData.ID_number;
        // 司机电话
        var phoneInput = document.querySelector('.book_input03[name="phone"]');
        phoneInput.value = selectedData.phone;
        // 家庭住址
        var addressInput = document.querySelector('.book_input03[name="address"]');
        addressInput.value = selectedData.address;
        // 邮箱
        var emailInput = document.querySelector('.book_input03[name="e-mail"]');
        emailInput.value = selectedData.email;
        // 邮政编码
        var Post_codeInput = document.querySelector('.book_input03[name="Post_code"]');
        Post_codeInput.value = selectedData.Post_Code;
        // var textarea = document.querySelector('#editor');
        // textarea.value = selectedData.statement;
        // textarea.value = selectedData.statement;
        // var ID_Card_Image
        // 身份证图片
        var ID_Card_Imagepath = 'images/' + selectedData.id+'.png';
        console.log(ID_Card_Imagepath);
        document.getElementById("imageLink").addEventListener("click", function(event) {
            event.preventDefault(); // 阻止默认行为，避免跳转页面

            // 获取图片路径
            var imagePath = ID_Card_Imagepath;

            // 使用 window.open() 函数打开一个新窗口显示图片
            var imageWindow = window.open('https://xlr.oss-cn-beijing.aliyuncs.com/avatar_default.jpg', '_blank');
            imageWindow.focus();
        });

        // console.log(selectedData);
        // 假设还有其他位置需要填充其他数据，继续在这里填充
        } else {
        console.error('No matching data found for ID:', ID);
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
</script>
<script>
    $(function(){
        $('#editor').editable({inlineMode: false, alwaysBlank: true})
    });
</script>
<!-- <script >
    $.validator.setDefaults({
        submitHandler: function() {
            alert("修改成功");
        }
    });
    $().ready(function() {
        $("#form_demo").validate();
    });
</script> -->
<script>
    !function(){
        laydate.skin('danlan');//
        laydate({elem: '#demo'});
        laydate({elem: '#demo1'});//
    }();
</script>
<script></script>
</body>
</html>
